@import "tailwindcss";

/* --- NEW: OFFLINE FONT DEFINITIONS (Roboto) --- */
/* roboto-regular - 400 */
@font-face {
    font-family: 'Roboto';
    font-style: normal;
    font-weight: 400;
    src: url('./fonts/Roboto-Regular.ttf') format('truetype');
}

/* roboto-medium - 500 (replaces semibold 600) */
@font-face {
    font-family: 'Roboto';
    font-style: normal;
    font-weight: 500;
    src: url('./fonts/Roboto-Medium.ttf') format('truetype');
}

/* roboto-bold - 700 */
@font-face {
    font-family: 'Roboto';
    font-style: normal;
    font-weight: 700;
    src: url('./fonts/Roboto-Bold.ttf') format('truetype');
}

/* roboto-black - 900 (replaces extrabold 800) */
@font-face {
    font-family: 'Roboto';
    font-style: normal;
    font-weight: 900;
    src: url('./fonts/Roboto-Black.ttf') format('truetype');
}

/* --- END OFFLINE FONT DEFINITIONS --- */

/* --- NEW: MODERN UI (v5.2) --- */

/* 1. The "Smart Section" Card */
.smart-section {
    background-color: var(--theme-card) !important;
    border-radius: 1.5rem;
    /* 24px */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    /* Clips the inner cards */
    opacity: 0;
    /* For fade-in animation */
    animation: fadeIn 0.5s ease-out forwards;
}

/* 2. The Section Header */
.smart-section-header {
    padding: 1.25rem 1.5rem;
    /* 20px 24px */
    border-bottom: 1px solid var(--theme-ui);
}

.smart-section-header h2 {
    font-size: 1.25rem;
    /* 20px */
    font-weight: 700;
    color: var(--theme-text);
}

.smart-section-header p {
    font-size: 0.875rem;
    /* 14px */
    color: var(--theme-text);
    opacity: 0.7;
}

/* 3. The Body (for inner cards) */
.smart-section-body {
    padding: 1rem;
    display: grid;
    gap: 0.75rem;
    background-color: rgba(0, 0, 0, 0.02);
    overflow-x: hidden;
    /* Keep tall expanded lists contained and scrollable */
    max-height: 40vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}


/* 4. The "Glassmorphism" Inner Card (FIXED FOR DARK MODE) */
.glass-card {
    background-color: var(--theme-glass-bg);
    /* <-- USES THEME VARIABLE */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--theme-glass-border);
    /* <-- USES THEME VARIABLE */
    border-radius: 1rem;
    /* 16px */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.03);
    padding: 1rem;
    /* 16px */
    transition: all 0.2s ease-out;
}

/* 5. The "Lift" Microinteraction */
.glass-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
}

/* 6. Fix for existing dashboard cards (FIXED FOR DARK MODE) */
#dashboard-page .bg-white {
    background-color: var(--theme-glass-bg) !important;
    /* <-- USES THEME VARIABLE */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid var(--theme-glass-border) !important;
    /* <-- USES THEME VARIABLE */
    border-radius: 1rem;
    /* 16px */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.03), 0 2px 4px -2px rgba(0, 0, 0, 0.03);
    transition: all 0.2s ease-out;
}

#dashboard-page .bg-white:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
}

/* 7. Override the main hero card to be a special gradient */
#dashboard-hero-card {
    background: linear-gradient(135deg, var(--theme-hero-start) 0%, var(--theme-hero-end) 100%);
    color: var(--theme-card);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border: 0;
    border-radius: 1.5rem;
    /* 24px */
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    transform: translateY(0);
    /* Fix for an animation bug */
}

/* Force text inside hero card to be light */
#dashboard-hero-card p,
#dashboard-hero-card span,
#dashboard-hero-card h2,
#dashboard-hero-card h3 {
    color: rgba(255, 255, 255, 0.9) !important;
    opacity: 1 !important;
    /* Override any opacity rules */
}

#dashboard-hero-card #dashboard-money-to-budget,
#dashboard-hero-card #dashboard-toggle-value {
    color: var(--theme-card) !important;
}

#dashboard-hero-card #dashboard-total-budgeted {
    color: rgba(255, 255, 255, 0.7) !important;
}

/* --- END MODERN UI (v5.2) --- */


/* 1. Page Background */
body,
html {
    background-color: var(--theme-page) !important;
    color: var(--theme-text) !important;
}

/* Our New Theme System (v5.2) */
:root {
    /* Primary Colors */
    --theme-primary-light: #fdf2f8;
    --theme-primary: #f472b6;
    --theme-primary-dark: #db2777;

    /* Backgrounds */
    --theme-page: #f7f3f8;
    --theme-card: #ffffff;
    --theme-ui: #e5e0e7;
    /* Borders, inputs */

    /* Text */
    --theme-text: #3f3c47;

    /* Accents */
    --theme-green: #34d399;
    --theme-red: #ef4444;
    --theme-red-dark: #dc2626;

    /* Hero Card Gradient */
    --theme-hero-start: #db2777;
    --theme-hero-end: #f472b6;

    /* NEW: Glass Effect */
    --theme-glass-bg: rgba(255, 255, 255, 0.7);
    --theme-glass-border: rgba(255, 255, 255, 0.2);

    /* NEW: Translucent Card Variables (for Dark Mode fixes) */
    --theme-green-light: #ecfdf5;
    /* Default Light (green-50) */
    --theme-green-text: #15803d;
    /* Default Light (green-700) */
    --theme-red-light: #fef2f2;
    /* Default Light (red-50) */
    --theme-red-text: #b91c1c;
    /* Default Light (red-700) */
}

/* Helper class to hide elements */
.hidden {
    display: none !important;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
}

/* Page transitions (simple fade) */
.page {
    display: none;
    /* All pages hidden by default */
    animation: fadeIn 0.3s ease-in-out;
}

.page.active {
    display: block;
    /* Active page is shown */
}

/* --- NEW: COMPREHENSIVE THEME FIX (v5.2 - !important) --- */

/* 1. Page Background */
body,
html {
    background-color: var(--theme-page) !important;
    color: var(--theme-text) !important;
}

/* 2. Main Card Backgrounds */
.bg-white {
    background-color: var(--theme-card) !important;
}

/* 3. Lighter / Secondary Backgrounds (buttons, inputs, etc.) */
.bg-gray-50,
.bg-gray-100,
.bg-gray-200,
.chart-zoom-btn,
.category-type-btn {
    background-color: var(--theme-ui) !important;
}

/* 4. Highlighted Card Backgrounds (Pink/Yellow cards) */
.bg-pink-50,
.bg-pink-100 {
    background-color: var(--theme-primary-light) !important;
}

/* NEW: Fix for hover contrast in dark mode */
.hover\:bg-pink-100:hover {
    background-color: var(--theme-primary-light) !important;
}

.bg-green-50 {
    background-color: var(--theme-green-light) !important;
}

.bg-red-50 {
    background-color: var(--theme-red-light) !important;
}

/* 5. Dropdown (select) & Date Styling */
select,
input[type="date"] {
    background-color: var(--theme-ui) !important;
    color: var(--theme-text) !important;
    border-color: var(--theme-ui) !important;
}

/* 6. Text Overrides (Inside ALL Cards & Buttons) */
/* This forces all text to obey the theme */
/* ADDED: font-semibold and font-medium as universal catch-alls */
.font-semibold,
.font-medium,
.bg-white .text-gray-900,
.bg-white .text-gray-800,
.bg-white .text-gray-700,
.bg-white h2,
.bg-white h3,
.bg-gray-50 .text-gray-900,
.bg-gray-50 .text-gray-800,
.bg-gray-50 .text-gray-700,
.bg-gray-50 .text-gray-600,
.bg-gray-50 h3,
.bg-gray-50 p,
.bg-gray-100 .text-gray-600,
.bg-gray-200 .text-gray-800,
.chart-zoom-btn,
.category-type-btn {
    color: var(--theme-text) !important;
    opacity: 0.9 !important;
}

/* 7. Lighter Helper Text */
.bg-white .text-gray-600,
.bg-white .text-gray-500,
.bg-white .text-gray-400,
.bg-white .text-sm,
.bg-white p,
.bg-white label,
.bg-white span,
.bg-gray-50 .text-gray-500,
.bg-gray-50 .text-sm,
.bg-white .text-pink-700 {
    color: var(--theme-text) !important;
    opacity: 0.75 !important;
}

/* NEW: Explicit fix for text-gray-800 to ensure theme compatibility */
.text-gray-800 {
    color: var(--theme-text) !important;
    opacity: 0.9 !important;
}

/* 8. Text Overrides (Inside Highlighted Cards) */
.bg-pink-50 .text-pink-700,
.bg-pink-50 .text-pink-900,
.bg-pink-100 .text-pink-700 {
    color: var(--theme-primary-dark) !important;
    opacity: 1.0 !important;
}

.bg-pink-50 .text-green-600 {
    color: var(--theme-green) !important;
}

.bg-pink-100 .text-pink-700 {
    color: var(--theme-primary) !important;
}

/* Fix for Green/Red Text in cards */
.text-green-700,
.text-green-800,
.text-green-600 {
    color: var(--theme-green-text) !important;
    opacity: 1 !important;
}

.text-red-600,
.text-red-700,
.text-red-800 {
    color: var(--theme-red-text) !important;
    opacity: 1 !important;
}

/* 9. Button Color Overrides */
.bg-pink-500 {
    background-color: var(--theme-primary) !important;
}

.bg-pink-500:hover {
    background-color: var(--theme-primary-dark) !important;
}

.text-pink-500 {
    color: var(--theme-primary) !important;
}

.text-pink-600 {
    color: var(--theme-primary) !important;
}

.hover\:text-pink-500:hover {
    color: var(--theme-primary) !important;
}

.border-pink-500 {
    border-color: var(--theme-primary) !important;
}

.bg-green-500 {
    background-color: var(--theme-green) !important;
}

.text-green-600 {
    color: var(--theme-green) !important;
}

.bg-red-500 {
    background-color: var(--theme-red) !important;
}

.bg-red-500:hover {
    background-color: var(--theme-red-dark) !important;
}

.text-red-500 {
    color: var(--theme-red) !important;
}

.text-red-600 {
    color: var(--theme-red) !important;
}

/* 10. Active/Hover states for button groups */
.stats-filter-btn.active,
.category-type-btn.active {
    background-color: var(--theme-card) !important;
    color: var(--theme-primary) !important;
}

.chart-zoom-btn:hover,
.category-type-btn:hover,
.stats-filter-btn:hover {
    background-color: var(--theme-card) !important;
    color: var(--theme-primary) !important;
}

/* 11. Header Icon Fix */
.header-logo-icon {
    color: var(--theme-primary) !important;
}

.coin-display {
    background-color: var(--theme-primary-light) !important;
    color: var(--theme-primary-dark) !important;
}

.coin-display svg {
    color: var(--theme-primary-dark) !important;
    opacity: 0.8;
}

#show-settings-modal-btn.text-gray-500,
#dark-theme-toggle.text-gray-500 {
    color: var(--theme-text) !important;
    opacity: 0.8 !important;
}

#show-settings-modal-btn:hover,
#dark-theme-toggle:hover {
    color: var(--theme-primary) !important;
}

/* --- END COMPREHENSIVE THEME FIX --- */

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* Active nav button style */
.nav-button.active {
    color: var(--theme-primary);
}

.nav-button {
    -webkit-user-select: none;
    /* Safari */
    -moz-user-select: none;
    /* Firefox */
    -ms-user-select: none;
    /* IE10+/Edge */
    user-select: none;
    /* Standard */
}

/* Bunny SVG Icon Styles */
.bunny-icon {
    width: 1.5rem;
    height: 1.5rem;
    transition: all 0.2s ease;
}

/* NEW: Make the logo icon bigger on the header */
.header-logo-icon {
    width: 2rem !important;
    /* Larger size */
    height: 2rem !important;
    /* Larger size */
}

.bunny-icon-sm {
    width: 1.25rem;
    height: 1.25rem;
}

/* Progress Bar */
progress[value] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 99px;
    overflow: hidden;
    border: 0;
}

progress[value]::-webkit-progress-bar {
    background-color: var(--theme-ui);
}

progress[value]::-webkit-progress-value {
    background-color: var(--theme-green);
    transition: all 0.3s ease;
}

/* Modal Backdrop */
.modal-backdrop {
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    /* NEW: Force default cursor to stop text-bleed bug */
    cursor: default;
}

/* Onboarding Modal */
#onboarding-modal {
    background-color: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
}

.onboarding-step {
    display: none;
}

.onboarding-step.active {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

/* NEW: Force-fix for stubborn cursor bug */
#reset-app-button,
#confirm-reset-button,
#cancel-reset-button {
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    cursor: pointer !important;
}

/* NEW: Fixes text cursor on ALL buttons */
button {
    -webkit-user-select: none;
    /* Safari */
    -moz-user-select: none;
    /* Firefox */
    -ms-user-select: none;
    /* IE10+/Edge */
    user-select: none;
    /* Standard */
    cursor: pointer;
    /* Ensures all buttons get the pointer */
}

/* NEW: AGGRESSIVE FIX FOR OVERFLOWING TEXT/CONTENT */
#app-container {
    /* Prevents the container from expanding beyond its max-width due to overflowing content */
    overflow-x: hidden !important;
    /* Prevents horizontal scrollbar from appearing */
    width: 100% !important;
}

/* Fix: allow flex children to shrink inside smart-section containers (prevents items from overflowing) */
.smart-section,
.smart-section * {
    box-sizing: border-box;
}

/* Ensure flex items inside smart sections can shrink */
.smart-section .flex,
.smart-section .flex>* {
    min-width: 0;
    /* allow truncation / shrinking inside flex */
}

/* Defensive wrapping for long text */
.smart-section-body,
.smart-section-body * {
    word-wrap: break-word;
    overflow-wrap: anywhere;
}


/* NEW: Re-enable text selection for inputs and textareas */
input[type="text"],
input[type="number"],
input[type="date"],
textarea {
    -webkit-user-select: text;
    /* Safari */
    -moz-user-select: text;
    /* Firefox */
    -ms-user-select: text;
    /* IE10+/Edge */
    user-select: text;
    /* Standard */
}

/* NEW: Allow text selection in help/guide sections */
#help-page,
#onboarding-step-help {
    -webkit-user-select: auto;
    -moz-user-select: auto;
    -ms-user-select: auto;
    user-select: auto;
}

/* Transaction History List */
#tx-history-list li:nth-child(even) {
    background-color: var(--theme-primary-light);
}

/* NEW: Active state for stats filter button */
.stats-filter-btn.active {
    background-color: var(--theme-card);
    color: var(--theme-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* NEW: Zoom Button Styles */
.chart-zoom-btn {
    padding: 0.25rem 0.75rem;
    min-width: 38px;
    border-radius: 0.375rem;
    /* rounded-md */
    font-size: 0.875rem;
    /* text-sm */
    font-weight: 500;
    /* font-medium */
    color: #4b5563;
    /* text-gray-600 */
    transition: all 0.15s ease-in-out;
}

.chart-zoom-btn:hover {
    background-color: var(--theme-card);
    color: var(--theme-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.chart-zoom-btn:active {
    transform: scale(0.95);
}

/* NEW: Fix for coin wrapping */
#stats-total-coins {
    white-space: nowrap;
}

/* NEW: Segmented Control Button Styles */
.category-type-btn {
    padding: 0.5rem 0.25rem;
    border-radius: 0.375rem;
    /* rounded-md */
    font-size: 0.875rem;
    /* text-sm */
    font-weight: 500;
    /* font-medium */
    color: #4b5563;
    /* text-gray-600 */
    transition: all 0.15s ease-in-out;
}

.category-type-btn.active {
    background-color: var(--theme-card);
    color: var(--theme-primary);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* --- NEW: MODERN STORE TAB STYLES (v5.3) --- */
/* 1. The container (Segmented Control look) */
.store-tabs {
    gap: 0.5rem;
    background-color: var(--theme-ui);
    padding: 0.25rem;
    border-radius: 0.75rem;
}

/* 2. The Button style */
.store-tab-btn {
    flex-grow: 1;
    text-align: center;
    padding: 0.5rem 0.75rem;
    border: none;
    border-radius: 0.5rem;
    font-weight: 500;
    color: var(--theme-text);
    background-color: transparent;
    transition: all 0.2s ease;
}

/* 3. Hover/Active State */
.store-tab-btn:hover {
    background-color: var(--theme-card);
    box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.05);
}

.store-tab-btn.active {
    background-color: var(--theme-card) !important;
    color: var(--theme-primary) !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06) !important;
}

/* --- END MODERN STORE TAB STYLES --- */